import{a4 as N,h as o,a7 as A,ay as I,a9 as R,aa as m,a6 as D,ab as h,ae as v,af as g,ag as p,ac as S,a0 as k,N as b,u as x,T as F,D as L,g as q,b as w}from"./runtime.DFuotMX-.js";function O(s,a,u=!1){o&&A();var e=s,n=null,r=null,i=k,y=u?I:0,c=!1;const T=(l,t=!0)=>{c=!0,_(t,l)},_=(l,t)=>{if(i===(i=l))return;let d=!1;if(o){const E=e.data===R;!!i===E&&(e=m(),D(e),h(!1),d=!0)}i?(n?v(n):t&&(n=g(()=>t(e))),r&&p(r,()=>{r=null})):(r?v(r):t&&(r=g(()=>t(e))),n&&p(n,()=>{n=null})),d&&h(!0)};N(()=>{c=!1,a(T),c||_(null,null)},y),o&&(e=S)}function C(s,a,u){if(s==null)return a(void 0),b;const e=x(()=>s.subscribe(a,u));return e.unsubscribe?()=>e.unsubscribe():e}let f=!1;function P(s,a,u){const e=u[a]??(u[a]={store:null,source:L(void 0),unsubscribe:b});if(e.store!==s)if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=b;else{var n=!0;e.unsubscribe=C(s,r=>{n?e.source.v=r:w(e.source,r)}),n=!1}return q(e.source)}function U(){const s={};return F(()=>{for(var a in s)s[a].unsubscribe()}),s}function Y(s){var a=f;try{return f=!1,[s(),f]}finally{f=a}}export{P as a,Y as c,O as i,U as s};
