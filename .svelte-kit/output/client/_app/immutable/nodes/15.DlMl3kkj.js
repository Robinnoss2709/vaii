import{a as p,t as f,c as rt}from"../chunks/disclose-version.CdZuIc7i.js";import"../chunks/legacy.CsAF3hgt.js";import{p as ae,c as a,s as i,r as e,t as u,g as t,a as re,b as x,f as ot,aw as J,m as B,ax as L}from"../chunks/runtime.DFuotMX-.js";import{s as _,e as C}from"../chunks/render.DdyBg62a.js";import{i as E,s as Ie,a as Nt}from"../chunks/store.daZB09SA.js";import{e as I,i as z}from"../chunks/each.DwzIx-JD.js";import{s as ze,r as At}from"../chunks/attributes.BFnUm24A.js";import{s as De}from"../chunks/class.BVZzqmLw.js";import{b as Bt}from"../chunks/input.BWrmKwv7.js";import{b as U}from"../chunks/select.hP7sz2eA.js";import{p as Ce}from"../chunks/event-modifiers.CWmzcjye.js";import{i as oe}from"../chunks/lifecycle.DL_zfByv.js";import{p as st}from"../chunks/props.7yD5DXMa.js";import{w as Lt}from"../chunks/index.BTgz_x7K.js";import{o as Ve}from"../chunks/index-client.D03nj6NQ.js";import{z as O}from"../chunks/index.DHHRaryC.js";import{f as Me}from"../chunks/validation.srizZMwT.js";import{p as Oe}from"../chunks/index.DZYfpQbg.js";var Fe=f('<div><span class="absolute top-0 right-4 border-1 text-red-600 hover:text-red-800 cursor-pointe text-4xl" role="button" tabindex="0" aria-label="Odstrániť"><i class="fas fa-times w-4 h-4"></i></span> <span class="absolute bottom-0 right-0 text-green-600 hover:text-green-800 pr-1 cursor-pointer text-3xl" role="button" tabindex="0" aria-label="Upraviť"><i class="fa-solid fa-pen-to-square"></i></span></div>'),$e=f("<div> </div>"),Te=f('<div class="bg-white p-6 rounded-lg shadow-xl hover:shadow-2xl hover:shadow-green-400 transition-shadow duration-300 text-gray-900 relative"><!> <h2 class="text-2xl font-bold"> </h2> <div class="flex flex-auto gap-3 bg-gray-200 rounded-md pl-2 mt-2"><div><span class="text-red-500"> </span></div> <div class="relative group"><span class="text-blue-400 cursor-pointer underline">Odbor</span> <span class="absolute left-0 mt-2 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-sm bg-gray-100 font-bold p-1 rounded-md z-10 whitespace-nowrap"></span></div> <div><span class="text-orange-400"> </span></div> <div><span class="text-green-400"> </span></div></div> <p class="mt-4"> </p> <a class="mt-4 inline-block basic-button bg-gray-500 hover-bg-green">Otvoriť tester</a></div>');function Ne(Y,T){ae(T,!1);let y=st(T,"subject",8),ct=st(T,"isEditingSubjects",8),h=st(T,"onDelete",8),it=st(T,"onEdit",8);oe();var Z=Te(),nt=a(Z);{var lt=M=>{var S=Fe(),w=a(S),j=i(w,2);e(S),C("click",w,g=>{g.stopPropagation(),h()(y().id)}),C("keydown",w,g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),g.stopPropagation(),h()(y().id))}),C("click",j,g=>{g.stopPropagation(),it()(y())}),C("keydown",j,g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),g.stopPropagation(),it()(y()))}),p(M,S)};E(nt,M=>{ct()&&M(lt)})}var F=i(nt,2),l=a(F,!0);e(F);var V=i(F,2),N=a(V),A=a(N),vt=a(A,!0);e(A),e(N);var q=i(N,2),G=i(a(q),2);I(G,5,()=>y().fields,z,(M,S)=>{var w=$e(),j=a(w,!0);e(w),u(()=>_(j,t(S))),p(M,w)}),e(G),e(q);var H=i(q,2),K=a(H),W=a(K);e(K),e(H);var R=i(H,2),X=a(R),_t=a(X,!0);e(X),e(R),e(V);var tt=i(V,2),mt=a(tt);e(tt);var ft=i(tt,2);e(Z),u(()=>{_(l,y().name),_(vt,y().study),_(W,`${y().year??""}. roč.`),_(_t,y().semester),_(mt,`Testuj svoje znalosti z predmetu ${y().name??""}.`),ze(ft,"href",`/subjects/${y().link}`)}),p(Y,Z),re()}const Ae=O.object({name:O.string().min(1,"Názov predmetu je povinný."),study:O.string().min(1,"Vyberte štúdium."),year:O.union([O.number().min(1,"Vyberte ročník."),O.null()]).refine(Y=>Y!==null,{message:"Vyberte ročník."}),semester:O.string().min(1,"Vyberte semester."),fields:O.array(O.string()).min(1,"Vyberte aspoň jeden odbor."),link:O.string().min(1,"Zadajte platný odkaz.")});var Be=f('<div class="mb-6 gap-5 flex"><span role="button" tabindex="0" aria-label="Pridať" class="basic-button bg-green-600 hover:bg-green-400 text-2xl"><i class="fa-solid fa-plus"></i></span> <button type="button"> </button></div>'),Le=f("<option> </option>"),Ue=f("<option> </option>"),Ze=f("<option> </option>"),Re=f("<option> </option>"),Je=f("<option> </option>"),qe=f('<p class="text-red-500"> </p>'),He=f("<option> </option>"),Qe=f('<p class="text-red-500"> </p>'),Ye=f("<option> </option>"),Ge=f('<p class="text-red-500"> </p>'),Ke=f("<option> </option>"),We=f('<p class="text-red-500"> </p>'),Xe=f("<option> </option>"),ta=f("<option> </option>"),ea=f('<p class="text-red-500"> </p>'),aa=f('<p class="text-red-500"> </p>'),ra=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-lg"><h2 class="text-2xl font-bold mb-4 text-gray-900"> </h2> <form class="flex flex-col gap-4"><input id="name" type="text" placeholder="Názov predmetu" class="basic-input"> <!> <select class="basic-input"><option>Štúdium</option><!></select> <!> <select class="basic-input"><option disabled selected hidden>Ročník</option><!></select> <!> <select class="basic-input"><option>Semester</option><!></select> <!> <select class="basic-input" multiple><option disabled>Vyber odbory</option><!><!></select> <!> <input type="text" placeholder="Odkaz na tester" class="basic-input mb-2"> <!> <div class="flex justify-end gap-4"><button type="button" class="basic-button hover-bg-green bg-gray-500">Zrušiť</button> <button type="submit" class="basic-button hover-bg-green bg-gray-500"> </button></div></form></div></div>'),oa=f('<div class="min-h-screen flex flex-col items-center justify-center bg-gray-100 p-6"><h1 class="text-4xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-6 text-center">Vyber si svoj predmet</h1> <!> <div class="flex justify-center mb-5 text-gray-900 w-full max-w-4xl"><input type="text" placeholder="Vyhľadaj predmet..." class="basic-input"></div> <div class="text-gray-900 flex flex-col sm:flex-row justify-center mb-5 gap-4"><div class="flex items-center mx-auto"><i class="fa-solid fa-filter mr-2"></i></div> <div class="flex items-center"><select class="basic-input"><option>Štúdium</option><!></select></div> <div class="flex items-center"><select class="basic-input"><option>Odbor</option><!><!></select></div> <div class="flex items-center"><select class="basic-input"><option>Ročník</option><!></select></div> <div class="flex items-center"><select class="basic-input"><option>Semester</option><!></select></div> <button type="button" class="flex items-center underline text-green-400 font-light cursor-pointer justify-center">Zruš filtre</button></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div></div>');function wa(Y,T){ae(T,!1);const y=Ie(),ct=()=>Nt(F,"$showModal",y),h=()=>Nt(Z,"$formErrors",y),it=()=>Nt(lt,"$subjects",y);let Z=Lt({}),nt=st(T,"data",8);const lt=Lt(nt().subjectCards),F=Lt(!1);let l=B({name:"",study:"",fields:[],year:null,semester:"",link:""}),V=B(!1),N=null,A=B(!1);const vt=["Informatika","Informatika a riadenie","Informačné a sieťové technológie","Manažment","Počítačové inžinierstvo"],q=["Aplikované sieťové inžinierstvo","Biomedicínska Informatika","Inteligentné informačné systémy","Informačné systémy","Informačný manažment","Počítačové inžinierstvo"],G=[1,2,3],H=["Bc.","Ing."],K=["Zimný","Letný"];async function W(){const o=await fetch("/tester");if(o.ok){const n=await o.json();lt.set(n)}}function R(){x(l,{name:"",study:"",fields:[],year:null,semester:"",link:""}),x(V,!1),N=null,Z.set({})}function X(){x(V,!1),F.set(!0)}function _t(o){x(l,{...o}),x(V,!0),N=o.id,F.set(!0)}async function tt(){const o=Ae.safeParse(t(l));if(!o.success){const n=Me(o.error.errors);Z.set(n);return}try{t(V)&&N?await fetch(`/tester/${N}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t(l))}):await fetch("/tester",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t(l))}),await W(),F.set(!1),R()}catch(n){console.error("Error saving subject:",n)}}async function mt(o){try{await fetch(`/tester?id=${o}`,{method:"DELETE"}),await W()}catch(n){console.error("Error deleting subject:",n)}}function ft(){x(A,!t(A))}Ve(W);let M=B(""),S=B(""),w=B(""),j=B(""),g=B("");function se(){x(M,""),x(S,""),x(w,""),x(j,""),x(g,"")}oe();var bt=oa(),Ut=i(a(bt),2);{var ie=o=>{var n=Be(),d=a(n),m=i(d,2),b=a(m,!0);e(m),e(n),u(()=>{De(m,`basic-button ${t(V)?"bg-red-500 hover:bg-red-600 text-gray-900":"bg-blue-500 hover:bg-blue-600  text-gray-900"}`),_(b,t(V)?"Dokončiť úpravy":"Upraviť karty")}),C("click",d,c=>{c.stopPropagation(),X(),R()}),C("keydown",d,c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),c.stopPropagation(),X(),R())}),C("click",m,ft),p(o,n)};E(Ut,o=>{Oe.data.isAdmin&&o(ie)})}var gt=i(Ut,2),Zt=a(gt);At(Zt),e(gt);var xt=i(gt,2),yt=i(a(xt),2),ht=a(yt);u(()=>{t(j),L(()=>{})});var kt=a(ht);kt.value=((kt.__value="")==null,"");var ne=i(kt);I(ne,1,()=>H,z,(o,n)=>{var d=Le(),m={},b=a(d,!0);e(d),u(()=>{m!==(m=t(n))&&(d.value=(d.__value=t(n))==null?"":t(n)),_(b,t(n))}),p(o,d)}),e(ht),e(yt);var wt=i(yt,2),jt=a(wt);u(()=>{t(S),L(()=>{t(j)})});var Et=a(jt);Et.value=((Et.__value="")==null,"");var Rt=i(Et);{var le=o=>{var n=rt(),d=ot(n);I(d,1,()=>vt,z,(m,b)=>{var c=Ue(),$={},Q=a(c,!0);e(c),u(()=>{$!==($=t(b))&&(c.value=(c.__value=t(b))==null?"":t(b)),_(Q,t(b))}),p(m,c)}),p(o,n)};E(Rt,o=>{t(j)==="Bc."&&o(le)})}var ve=i(Rt);{var de=o=>{var n=rt(),d=ot(n);I(d,1,()=>q,z,(m,b)=>{var c=Ze(),$={},Q=a(c,!0);e(c),u(()=>{$!==($=t(b))&&(c.value=(c.__value=t(b))==null?"":t(b)),_(Q,t(b))}),p(m,c)}),p(o,n)};E(ve,o=>{t(j)==="Ing."&&o(de)})}e(jt),e(wt);var St=i(wt,2),Pt=a(St);u(()=>{t(w),L(()=>{})});var It=a(Pt);It.value=((It.__value="")==null,"");var ue=i(It);I(ue,1,()=>G,z,(o,n)=>{var d=Re(),m={},b=a(d,!0);e(d),u(()=>{m!==(m=t(n))&&(d.value=(d.__value=t(n))==null?"":t(n)),_(b,t(n))}),p(o,d)}),e(Pt),e(St);var zt=i(St,2),Dt=a(zt);u(()=>{t(g),L(()=>{})});var Ct=a(Dt);Ct.value=((Ct.__value="")==null,"");var pe=i(Ct);I(pe,1,()=>K,z,(o,n)=>{var d=Je(),m={},b=a(d,!0);e(d),u(()=>{m!==(m=t(n))&&(d.value=(d.__value=t(n))==null?"":t(n)),_(b,t(n))}),p(o,d)}),e(Dt),e(zt);var ce=i(zt,2);e(xt);var Jt=i(xt,2);{var _e=o=>{var n=ra(),d=a(n),m=a(d),b=a(m,!0);e(m);var c=i(m,2),$=a(c);At($);var Q=i($,2);{var me=r=>{var s=qe(),v=a(s,!0);e(s),u(()=>_(v,h().name)),p(r,s)};E(Q,r=>{h().name&&r(me)})}var et=i(Q,2);u(()=>{t(l),L(()=>{})});var Vt=a(et);Vt.value=((Vt.__value="")==null,"");var fe=i(Vt);I(fe,1,()=>H,z,(r,s)=>{var v=He(),P={},k=a(v,!0);e(v),u(()=>{P!==(P=t(s))&&(v.value=(v.__value=t(s))==null?"":t(s)),_(k,t(s))}),p(r,v)}),e(et);var Ht=i(et,2);{var be=r=>{var s=Qe(),v=a(s,!0);e(s),u(()=>_(v,h().study)),p(r,s)};E(Ht,r=>{h().study&&r(be)})}var dt=i(Ht,2);u(()=>{t(l),L(()=>{})});var Mt=a(dt);Mt.value=(Mt.__value=null)==null?"":null;var ge=i(Mt);I(ge,1,()=>G,z,(r,s)=>{var v=Ye(),P={},k=a(v,!0);e(v),u(()=>{P!==(P=t(s))&&(v.value=(v.__value=t(s))==null?"":t(s)),_(k,t(s))}),p(r,v)}),e(dt);var Qt=i(dt,2);{var xe=r=>{var s=Ge(),v=a(s,!0);e(s),u(()=>_(v,h().year)),p(r,s)};E(Qt,r=>{h().year&&r(xe)})}var ut=i(Qt,2);u(()=>{t(l),L(()=>{})});var Ot=a(ut);Ot.value=((Ot.__value="")==null,"");var ye=i(Ot);I(ye,1,()=>K,z,(r,s)=>{var v=Ke(),P={},k=a(v,!0);e(v),u(()=>{P!==(P=t(s))&&(v.value=(v.__value=t(s))==null?"":t(s)),_(k,t(s))}),p(r,v)}),e(ut);var Yt=i(ut,2);{var he=r=>{var s=We(),v=a(s,!0);e(s),u(()=>_(v,h().semester)),p(r,s)};E(Yt,r=>{h().semester&&r(he)})}var pt=i(Yt,2);u(()=>{t(l),L(()=>{})});var Ft=a(pt);Ft.value=((Ft.__value="")==null,"");var Gt=i(Ft);{var ke=r=>{var s=rt(),v=ot(s);I(v,1,()=>vt,z,(P,k)=>{var D=Xe(),at={},Tt=a(D,!0);e(D),u(()=>{at!==(at=t(k))&&(D.value=(D.__value=t(k))==null?"":t(k)),_(Tt,t(k))}),p(P,D)}),p(r,s)};E(Gt,r=>{t(l).study==="Bc."&&r(ke)})}var we=i(Gt);{var je=r=>{var s=rt(),v=ot(s);I(v,1,()=>q,z,(P,k)=>{var D=ta(),at={},Tt=a(D,!0);e(D),u(()=>{at!==(at=t(k))&&(D.value=(D.__value=t(k))==null?"":t(k)),_(Tt,t(k))}),p(P,D)}),p(r,s)};E(we,r=>{t(l).study==="Ing."&&r(je)})}e(pt);var Kt=i(pt,2);{var Ee=r=>{var s=ea(),v=a(s,!0);e(s),u(()=>_(v,h().fields)),p(r,s)};E(Kt,r=>{h().fields&&r(Ee)})}var $t=i(Kt,2);At($t);var Wt=i($t,2);{var Se=r=>{var s=aa(),v=a(s,!0);e(s),u(()=>_(v,h().link)),p(r,s)};E(Wt,r=>{h().link&&r(Se)})}var Xt=i(Wt,2),te=a(Xt),ee=i(te,2),Pe=a(ee,!0);e(ee),e(Xt),e(c),e(d),e(n),u(()=>{_(b,t(A)?"Uprav predmet":"Pridaj nový predmet"),_(Pe,t(A)?"Uložiť zmeny":"Pridať predmet")}),Bt($,()=>t(l).name,r=>J(l,t(l).name=r)),U(et,()=>t(l).study,r=>J(l,t(l).study=r)),C("change",et,()=>J(l,t(l).fields=[])),U(dt,()=>t(l).year,r=>J(l,t(l).year=r)),U(ut,()=>t(l).semester,r=>J(l,t(l).semester=r)),U(pt,()=>t(l).fields,r=>J(l,t(l).fields=r)),Bt($t,()=>t(l).link,r=>J(l,t(l).link=r)),C("click",te,()=>{R(),F.set(!1)}),C("submit",c,Ce(tt)),p(o,n)};E(Jt,o=>{ct()&&o(_e)})}var qt=i(Jt,2);I(qt,5,it,z,(o,n)=>{var d=rt(),m=ot(d);{var b=c=>{Ne(c,{get subject(){return t(n)},get isEditingSubjects(){return t(A)},onDelete:mt,onEdit:_t})};E(m,c=>{(!t(j)||t(n).study===t(j))&&(!t(S)||t(n).fields.includes(t(S)))&&(!t(w)||t(n).year===Number(t(w)))&&(!t(g)||t(n).semester===t(g))&&t(n).name.toLowerCase().includes(t(M).toLowerCase())&&c(b)})}p(o,d)}),e(qt),e(bt),Bt(Zt,()=>t(M),o=>x(M,o)),U(ht,()=>t(j),o=>x(j,o)),U(jt,()=>t(S),o=>x(S,o)),U(Pt,()=>t(w),o=>x(w,o)),U(Dt,()=>t(g),o=>x(g,o)),C("click",ce,se),p(Y,bt),re()}export{wa as component};
