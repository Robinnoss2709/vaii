import{a as p,t as v,c as U}from"../chunks/disclose-version.CdZuIc7i.js";import"../chunks/legacy.CsAF3hgt.js";import{p as re,a as te,g as a,b as f,c as i,s as d,f as D,r as l,t as M,n as oe,m as b}from"../chunks/runtime.DFuotMX-.js";import{e as W,s as N}from"../chunks/render.DdyBg62a.js";import{s as ie,i as x,a as le}from"../chunks/store.daZB09SA.js";import{e as Z,i as A}from"../chunks/each.DwzIx-JD.js";import{r as C}from"../chunks/attributes.BFnUm24A.js";import{b as E}from"../chunks/input.BWrmKwv7.js";import{p as ne}from"../chunks/event-modifiers.CWmzcjye.js";import{i as me}from"../chunks/lifecycle.DL_zfByv.js";import{g as pe}from"../chunks/entry.DVvn58Tu.js";import{p as de}from"../chunks/stores.Dg0aosXn.js";import{z as w}from"../chunks/index.DHHRaryC.js";var ve=v('<p class="text-red-500 text-sm"> </p>'),ce=v('<p class="text-red-500 text-sm"> </p>'),fe=v('<p class="text-red-500 text-sm"> </p>'),ue=v('<p class="text-red-500 text-sm">Heslá sa nezhodujú!</p>'),ge=v("<!> <!>",1),be=v(`<div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"><div class="bg-white p-6 rounded-lg w-96"><h2 class="text-xl font-bold text-green-500">Úspešná registrácia!</h2> <p class="mt-4 text-gray-700">Na váš email bol odoslaný potvrdzovací email. Skontrolujte
                    svoj inbox a potvrďte registráciu.</p> <div class="mt-6 flex justify-end"><button class="basic-button hover-bg-green">Zatvoriť</button></div></div></div>`),xe=v('<div class="bg-gray-200 min-h-screen"><div class="flex flex-col justify-center items-center text-green-400 p-6"><h1 class="font-bold text-3xl text-gray-900 mb-6">Registrácia</h1> <form class="flex flex-col gap-4 w-full max-w-sm"><label><input type="email" placeholder="Email" class="basic-input text-gray-900" required> <!></label> <label><input type="password" placeholder="Heslo" class="basic-input text-gray-900" required> <!></label> <label><input type="password" placeholder="Potvrďte heslo" class="basic-input text-gray-900" required> <!></label> <button type="submit" class="py-2 px-4 rounded-md bg-green-500 text-white font-bold transition duration-300 hover:bg-green-600 w-full">Registruj sa</button></form></div> <!></div>');function De(B,F){re(F,!1);const G=ie(),I=()=>le(de,"$page",G);let u=b(""),c=b(""),g=b(""),y=b(!1),_=b(!1);const h=w.object({email:w.string().email("Neplatný formát emailovej adresy."),password:w.string().min(8,"Heslo musí mať aspoň 8 znakov.").max(50,"Heslo môže mať maximálne 50 znakov.").regex(/[A-Z]/,"Heslo musí obsahovať aspoň jedno veľké písmeno.").regex(/[a-z]/,"Heslo musí obsahovať aspoň jedno malé písmeno.").regex(/[0-9]/,"Heslo musí obsahovať aspoň jedno číslo.").regex(/[\W_]/,"Heslo musí obsahovať aspoň jeden špeciálny znak."),confirmPassword:w.string()}).refine(e=>e.password===e.confirmPassword,{message:"Heslá sa nezhodujú!",path:["confirmPassword"]}),J=async e=>{e.preventDefault(),f(_,!0);const t=h.safeParse({email:a(u),password:a(c),confirmPassword:a(g)});if(!t.success){t.error.issues.map(s=>s.message).join(" ");return}const{error:o}=await I().data.supabase.auth.signUp({email:a(u),password:a(c)});o?""+o.message:(f(y,!0),location.reload(),setTimeout(()=>{pe("/login")},1e4))},K=()=>{f(y,!1)};me();var j=xe(),P=i(j),H=d(i(P),2),k=i(H),z=i(k);C(z);var L=d(z,2);{var O=e=>{var t=U(),o=D(t);Z(o,1,()=>{var s;return((s=h.safeParse({email:a(u)}).error)==null?void 0:s.issues.filter(n=>n.message!=="Required"))||[]},A,(s,n)=>{var r=ve(),m=i(r,!0);l(r),M(()=>N(m,a(n).message)),p(s,r)}),p(e,t)};x(L,e=>{a(_)&&e(O)})}l(k);var R=d(k,2),q=i(R);C(q);var Q=d(q,2);{var V=e=>{var t=U(),o=D(t);Z(o,1,()=>{var s;return((s=h.safeParse({password:a(c)}).error)==null?void 0:s.issues.filter(n=>n.message!=="Required"))||[]},A,(s,n)=>{var r=ce(),m=i(r,!0);l(r),M(()=>N(m,a(n).message)),p(s,r)}),p(e,t)};x(Q,e=>{a(_)&&e(V)})}l(R);var T=d(R,2),$=i(T);C($);var X=d($,2);{var Y=e=>{var t=ge(),o=D(t);Z(o,1,()=>{var r;return((r=h.safeParse({confirmPassword:a(g)}).error)==null?void 0:r.issues.filter(m=>m.message!=="Required"))||[]},A,(r,m)=>{var S=fe(),se=i(S,!0);l(S),M(()=>N(se,a(m).message)),p(r,S)});var s=d(o,2);{var n=r=>{var m=ue();p(r,m)};x(s,r=>{a(c)!==a(g)&&r(n)})}p(e,t)};x(X,e=>{a(_)&&e(Y)})}l(T),oe(2),l(H),l(P);var ee=d(P,2);{var ae=e=>{var t=be(),o=i(t),s=d(i(o),4),n=i(s);l(s),l(o),l(t),W("click",n,K),p(e,t)};x(ee,e=>{a(y)&&e(ae)})}l(j),E(z,()=>a(u),e=>f(u,e)),E(q,()=>a(c),e=>f(c,e)),E($,()=>a(g),e=>f(g,e)),W("submit",H,ne(J)),p(B,j),te()}export{De as component};
